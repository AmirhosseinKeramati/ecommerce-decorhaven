<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Décor Haven - Shopping Mall Decoration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2c3e50;
            --secondary-color: #e74c3c;
            --accent-color: #f39c12;
            --light-bg: #ecf0f1;
            --dark-text: #2c3e50;
            --light-text: #7f8c8d;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            overflow-x: hidden;
        }

        /* Header & Navigation */
        header {
            background: var(--white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .top-bar {
            background: var(--primary-color);
            color: var(--white);
            padding: 10px 0;
            font-size: 14px;
        }

        .top-bar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .top-bar a {
            color: var(--white);
            text-decoration: none;
            margin-left: 20px;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 5%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: var(--secondary-color);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark-text);
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--secondary-color);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--secondary-color);
            transition: width 0.3s;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-icons {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-icons a {
            color: var(--dark-text);
            font-size: 20px;
            position: relative;
            transition: color 0.3s;
        }

        .nav-icons a:hover {
            color: var(--secondary-color);
        }

        .cart-count, .wishlist-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--secondary-color);
            color: var(--white);
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
        }

        .wishlist-count {
            background: var(--accent-color);
        }

        .mobile-menu {
            display: none;
            font-size: 24px;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, rgba(44, 62, 80, 0.9), rgba(231, 76, 60, 0.8)), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><rect fill="%23ecf0f1" width="1200" height="600"/><path fill="%23bdc3c7" d="M0 300L50 280C100 260 200 220 300 200C400 180 500 180 600 200C700 220 800 260 900 280C1000 300 1100 300 1150 300L1200 300L1200 600L1150 600C1100 600 1000 600 900 600C800 600 700 600 600 600C500 600 400 600 300 600C200 600 100 600 50 600L0 600Z"/></svg>');
            background-size: cover;
            background-position: center;
            color: var(--white);
            padding: 100px 5%;
            text-align: center;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            animation: fadeInUp 1s ease;
        }

        .hero h1 {
            font-size: 56px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero p {
            font-size: 20px;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .btn {
            display: inline-block;
            padding: 15px 40px;
            background: var(--secondary-color);
            color: var(--white);
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        .btn:hover {
            background: #c0392b;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--white);
            margin-left: 15px;
        }

        .btn-secondary:hover {
            background: var(--white);
            color: var(--primary-color);
        }

        /* Categories Section */
        .categories {
            padding: 80px 5%;
            background: var(--light-bg);
        }

        .section-title {
            text-align: center;
            font-size: 42px;
            margin-bottom: 50px;
            color: var(--primary-color);
            position: relative;
            padding-bottom: 15px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: var(--secondary-color);
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .category-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }

        .category-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            color: var(--white);
            position: relative;
            overflow: hidden;
        }

        .category-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0);
            transition: background 0.3s;
        }

        .category-card:hover .category-image::before {
            background: rgba(0,0,0,0.2);
        }

        .category-card:nth-child(1) .category-image { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .category-card:nth-child(2) .category-image { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .category-card:nth-child(3) .category-image { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .category-card:nth-child(4) .category-image { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }

        .category-info {
            padding: 25px;
            text-align: center;
        }

        .category-info h3 {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .category-info p {
            color: var(--light-text);
            font-size: 14px;
        }

        /* Products Section */
        .products {
            padding: 80px 5%;
            background: var(--white);
        }

        .filter-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 50px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 25px;
            background: var(--light-bg);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            color: var(--dark-text);
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--secondary-color);
            color: var(--white);
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .product-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }

        .product-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--secondary-color);
            color: var(--white);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1;
        }

        .product-badge.new {
            background: #27ae60;
        }

        .product-image {
            width: 100%;
            height: 300px;
            background: var(--light-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            color: var(--light-text);
            position: relative;
            overflow: hidden;
        }

        .product-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .product-card:hover .product-overlay {
            opacity: 1;
        }

        .overlay-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--white);
            color: var(--primary-color);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s;
        }

        .overlay-btn:hover {
            background: var(--secondary-color);
            color: var(--white);
            transform: scale(1.1);
        }

        .product-info {
            padding: 20px;
        }

        .product-category {
            color: var(--light-text);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .product-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 10px;
        }

        .stars {
            color: var(--accent-color);
        }

        .rating-count {
            color: var(--light-text);
            font-size: 13px;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .current-price {
            font-size: 24px;
            font-weight: bold;
            color: var(--secondary-color);
        }

        .old-price {
            font-size: 16px;
            color: var(--light-text);
            text-decoration: line-through;
        }

        .add-to-cart {
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .add-to-cart:hover {
            background: var(--secondary-color);
        }

        /* Features Section */
        .features {
            padding: 80px 5%;
            background: var(--light-bg);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-item {
            text-align: center;
            padding: 30px;
            background: var(--white);
            border-radius: 15px;
            transition: all 0.3s;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 35px;
            color: var(--white);
        }

        .feature-item h3 {
            font-size: 22px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .feature-item p {
            color: var(--light-text);
        }

        /* Newsletter Section */
        .newsletter {
            padding: 80px 5%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            text-align: center;
        }

        .newsletter h2 {
            font-size: 38px;
            margin-bottom: 15px;
        }

        .newsletter p {
            font-size: 18px;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .newsletter-form {
            display: flex;
            max-width: 600px;
            margin: 0 auto;
            gap: 10px;
        }

        .newsletter-form input {
            flex: 1;
            padding: 15px 25px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            outline: none;
        }

        .newsletter-form button {
            padding: 15px 40px;
            background: var(--white);
            color: var(--secondary-color);
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .newsletter-form button:hover {
            background: var(--light-bg);
            transform: scale(1.05);
        }

        /* Footer */
        footer {
            background: var(--primary-color);
            color: var(--white);
            padding: 60px 5% 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto 40px;
        }

        .footer-section h3 {
            font-size: 22px;
            margin-bottom: 20px;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: var(--white);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .social-links a:hover {
            background: var(--secondary-color);
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.7);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu {
                display: block;
            }

            .hero h1 {
                font-size: 36px;
            }

            .hero p {
                font-size: 16px;
            }

            .btn-secondary {
                margin-left: 0;
                margin-top: 10px;
            }

            .section-title {
                font-size: 32px;
            }

            .newsletter-form {
                flex-direction: column;
            }

            .newsletter-form button {
                width: 100%;
            }

            .category-grid,
            .product-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }

            /* Modal responsive */
            .modal {
                width: 95%;
                max-height: 95vh;
            }

            .quick-view-content {
                grid-template-columns: 1fr;
                padding: 20px;
            }

            .quick-view-image {
                height: 250px;
            }

            .account-content,
            .cart-content,
            .wishlist-content {
                padding: 20px;
            }

            .account-tabs {
                flex-wrap: wrap;
                gap: 10px;
            }

            .account-tab {
                padding: 10px 15px;
                font-size: 14px;
            }

            .cart-item {
                grid-template-columns: 80px 1fr;
                gap: 15px;
            }

            .cart-item-image {
                width: 80px;
                height: 80px;
                font-size: 30px;
            }

            .cart-item-actions {
                grid-column: 1 / -1;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }

            .cart-actions {
                flex-direction: column;
            }

            .cart-actions button {
                width: 100%;
            }

            .wishlist-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .checkout-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .payment-methods {
                grid-template-columns: 1fr;
            }

            .checkout-summary {
                position: static;
            }

            .quick-view-actions {
                flex-direction: column;
            }

            /* Search responsive */
            .search-content {
                padding: 20px;
            }

            .search-content h2 {
                font-size: 24px;
            }

            .search-filters {
                gap: 8px;
            }

            .search-filter-btn {
                padding: 8px 12px;
                font-size: 12px;
            }

            .search-results-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .search-sort {
                width: 100%;
            }

            .search-sort select {
                flex: 1;
            }

            .search-results {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }

            .search-result-image {
                height: 140px;
                font-size: 50px;
            }
        }

        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid var(--light-bg);
            border-top: 4px solid var(--secondary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Modal Overlay */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Modal Container */
        .modal {
            background: var(--white);
            border-radius: 20px;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.4s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--light-bg);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--dark-text);
            transition: all 0.3s;
            z-index: 10;
        }

        .modal-close:hover {
            background: var(--secondary-color);
            color: var(--white);
            transform: rotate(90deg);
        }

        /* Quick View Modal */
        .quick-view-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            padding: 40px;
        }

        .quick-view-image {
            width: 100%;
            height: 400px;
            background: var(--light-bg);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 120px;
            color: var(--light-text);
        }

        .quick-view-details h2 {
            font-size: 32px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .quick-view-details .product-category {
            color: var(--light-text);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .quick-view-details .product-rating {
            margin-bottom: 20px;
        }

        .quick-view-details .product-price {
            margin-bottom: 20px;
        }

        .quick-view-details .product-description {
            color: var(--light-text);
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .quantity-selector button {
            width: 40px;
            height: 40px;
            border: 2px solid var(--light-bg);
            background: var(--white);
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
        }

        .quantity-selector button:hover {
            border-color: var(--secondary-color);
            color: var(--secondary-color);
        }

        .quantity-selector input {
            width: 60px;
            height: 40px;
            text-align: center;
            border: 2px solid var(--light-bg);
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
        }

        .quick-view-actions {
            display: flex;
            gap: 15px;
        }

        .quick-view-actions button {
            flex: 1;
        }

        /* Account Modal */
        .account-content {
            padding: 40px;
        }

        .account-tabs {
            display: flex;
            gap: 20px;
            border-bottom: 2px solid var(--light-bg);
            margin-bottom: 30px;
        }

        .account-tab {
            padding: 15px 30px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: var(--light-text);
            position: relative;
            transition: all 0.3s;
        }

        .account-tab.active {
            color: var(--secondary-color);
        }

        .account-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--secondary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .form-group input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid var(--light-bg);
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        .user-profile-info {
            background: var(--light-bg);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .user-profile-info h3 {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .profile-detail {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .profile-detail:last-child {
            border-bottom: none;
        }

        .profile-detail strong {
            color: var(--primary-color);
        }

        .orders-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .order-item {
            background: var(--light-bg);
            padding: 25px;
            border-radius: 15px;
            transition: all 0.3s;
        }

        .order-item:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .order-id {
            font-weight: 600;
            color: var(--primary-color);
        }

        .order-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        .order-status.pending {
            background: #f39c12;
            color: var(--white);
        }

        .order-status.completed {
            background: #27ae60;
            color: var(--white);
        }

        .order-status.cancelled {
            background: #e74c3c;
            color: var(--white);
        }

        /* Cart Modal */
        .cart-content {
            padding: 40px;
        }

        .cart-content h2 {
            font-size: 32px;
            margin-bottom: 30px;
            color: var(--primary-color);
        }

        .cart-items {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
            max-height: 400px;
            overflow-y: auto;
        }

        .cart-item {
            display: grid;
            grid-template-columns: 100px 1fr auto;
            gap: 20px;
            background: var(--light-bg);
            padding: 20px;
            border-radius: 15px;
            align-items: center;
        }

        .cart-item-image {
            width: 100px;
            height: 100px;
            background: var(--white);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: var(--light-text);
        }

        .cart-item-details h4 {
            font-size: 18px;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        .cart-item-details .cart-item-category {
            color: var(--light-text);
            font-size: 13px;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .cart-item-details .cart-item-price {
            font-size: 20px;
            font-weight: bold;
            color: var(--secondary-color);
        }

        .cart-item-actions {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: flex-end;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cart-item-quantity button {
            width: 30px;
            height: 30px;
            border: 2px solid var(--light-bg);
            background: var(--white);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .cart-item-quantity button:hover {
            border-color: var(--secondary-color);
            color: var(--secondary-color);
        }

        .cart-item-quantity span {
            width: 40px;
            text-align: center;
            font-weight: 600;
        }

        .cart-item-remove {
            background: none;
            border: none;
            color: var(--secondary-color);
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .cart-item-remove:hover {
            text-decoration: underline;
        }

        .cart-summary {
            background: var(--light-bg);
            padding: 25px;
            border-radius: 15px;
        }

        .cart-summary-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            font-size: 16px;
        }

        .cart-summary-row.total {
            border-top: 2px solid var(--white);
            margin-top: 10px;
            padding-top: 20px;
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .cart-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .cart-empty {
            text-align: center;
            padding: 60px 20px;
        }

        /* Checkout Styles */
        .modal-large {
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .checkout-content h2 {
            margin-bottom: 30px;
            color: var(--primary-color);
        }

        .checkout-grid {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 30px;
        }

        .checkout-section {
            background: var(--light-bg);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .checkout-section h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .payment-method {
            cursor: pointer;
        }

        .payment-method input[type="radio"] {
            display: none;
        }

        .payment-option {
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s;
            background: white;
        }

        .payment-option i {
            font-size: 32px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .payment-option span {
            display: block;
            font-weight: 600;
        }

        .payment-method input:checked + .payment-option {
            border-color: var(--primary-color);
            background: var(--light-bg);
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.2);
        }

        .checkout-summary {
            background: var(--light-bg);
            padding: 25px;
            border-radius: 15px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .checkout-summary h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .checkout-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .checkout-item-icon {
            font-size: 24px;
            color: var(--primary-color);
            width: 40px;
            text-align: center;
        }

        .checkout-item-details {
            flex: 1;
        }

        .checkout-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .checkout-item-quantity {
            font-size: 14px;
            color: var(--text-light);
        }

        .checkout-item-price {
            font-weight: 700;
            color: var(--primary-color);
        }

        .checkout-totals {
            margin: 25px 0;
            padding-top: 20px;
            border-top: 2px solid white;
        }

        .checkout-total-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            font-size: 16px;
        }

        .checkout-total-row.total {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            padding-top: 15px;
            border-top: 2px solid white;
            margin-top: 10px;
        }

        .btn-large {
            width: 100%;
            padding: 18px;
            font-size: 18px;
            font-weight: 700;
        }

        .cart-empty i {
            font-size: 80px;
            color: var(--light-text);
            margin-bottom: 20px;
        }

        .cart-empty h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .cart-empty p {
            color: var(--light-text);
            margin-bottom: 25px;
        }

        /* Wishlist Modal */
        .wishlist-content {
            padding: 40px;
        }

        .wishlist-content h2 {
            font-size: 32px;
            margin-bottom: 30px;
            color: var(--primary-color);
        }

        .wishlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .wishlist-item {
            background: var(--light-bg);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s;
            position: relative;
        }

        .wishlist-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .wishlist-item-image {
            width: 100%;
            height: 200px;
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: var(--light-text);
        }

        .wishlist-item-info {
            padding: 15px;
        }

        .wishlist-item-info h4 {
            font-size: 16px;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        .wishlist-item-info .wishlist-item-price {
            font-size: 18px;
            font-weight: bold;
            color: var(--secondary-color);
            margin-bottom: 12px;
        }

        .wishlist-item-actions {
            display: flex;
            gap: 10px;
        }

        .wishlist-item-actions button {
            flex: 1;
            padding: 8px;
            font-size: 13px;
        }

        .wishlist-item-remove {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--white);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary-color);
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .wishlist-item-remove:hover {
            background: var(--secondary-color);
            color: var(--white);
        }

        .wishlist-empty {
            text-align: center;
            padding: 60px 20px;
        }

        .wishlist-empty i {
            font-size: 80px;
            color: var(--light-text);
            margin-bottom: 20px;
        }

        .wishlist-empty h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .wishlist-empty p {
            color: var(--light-text);
            margin-bottom: 25px;
        }

        /* Search Modal */
        .search-content {
            padding: 40px;
        }

        .search-content h2 {
            font-size: 32px;
            margin-bottom: 30px;
            color: var(--primary-color);
        }

        .search-bar {
            position: relative;
            margin-bottom: 30px;
        }

        .search-bar input {
            width: 100%;
            padding: 18px 60px 18px 25px;
            border: 2px solid var(--light-bg);
            border-radius: 50px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
        }

        .search-bar button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--secondary-color);
            color: var(--white);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s;
        }

        .search-bar button:hover {
            background: #c0392b;
            transform: translateY(-50%) scale(1.05);
        }

        .search-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .search-filter-btn {
            padding: 10px 20px;
            background: var(--light-bg);
            border: 2px solid transparent;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            color: var(--dark-text);
            font-size: 14px;
        }

        .search-filter-btn:hover {
            background: var(--white);
            border-color: var(--secondary-color);
        }

        .search-filter-btn.active {
            background: var(--secondary-color);
            color: var(--white);
            border-color: var(--secondary-color);
        }

        .search-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-bg);
        }

        .search-results-count {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .search-sort {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-sort label {
            font-size: 14px;
            color: var(--light-text);
        }

        .search-sort select {
            padding: 8px 15px;
            border: 2px solid var(--light-bg);
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            background: var(--white);
            transition: all 0.3s;
        }

        .search-sort select:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        .search-results {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .search-results::-webkit-scrollbar {
            width: 8px;
        }

        .search-results::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        .search-results::-webkit-scrollbar-thumb {
            background: var(--secondary-color);
            border-radius: 10px;
        }

        .search-result-item {
            background: var(--light-bg);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .search-result-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .search-result-image {
            width: 100%;
            height: 180px;
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: var(--light-text);
        }

        .search-result-info {
            padding: 15px;
        }

        .search-result-category {
            color: var(--light-text);
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }

        .search-result-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        .search-result-price {
            font-size: 18px;
            font-weight: bold;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }

        .search-result-actions {
            display: flex;
            gap: 8px;
        }

        .search-result-actions button {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .search-result-cart {
            background: var(--secondary-color);
            color: var(--white);
        }

        .search-result-cart:hover {
            background: #c0392b;
        }

        .search-result-view {
            background: var(--white);
            color: var(--primary-color);
            border: 2px solid var(--light-bg);
        }

        .search-result-view:hover {
            border-color: var(--secondary-color);
            color: var(--secondary-color);
        }

        .search-no-results {
            text-align: center;
            padding: 60px 20px;
        }

        .search-no-results i {
            font-size: 80px;
            color: var(--light-text);
            margin-bottom: 20px;
        }

        .search-no-results h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .search-no-results p {
            color: var(--light-text);
            margin-bottom: 25px;
        }

        .search-suggestions {
            margin-top: 20px;
        }

        .search-suggestions h4 {
            font-size: 16px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .search-suggestions-list {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .suggestion-tag {
            padding: 8px 16px;
            background: var(--light-bg);
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .suggestion-tag:hover {
            background: var(--secondary-color);
            color: var(--white);
        }

        .search-history {
            margin-bottom: 30px;
        }

        .search-history h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .search-history-list {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .search-history-item {
            padding: 8px 16px;
            background: var(--light-bg);
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-history-item:hover {
            background: var(--secondary-color);
            color: var(--white);
        }

        .search-history-item i {
            font-size: 12px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="top-bar">
            <div class="container">
                <div>
                    <i class="fas fa-phone"></i> +1 (555) 123-4567
                    <a href="mailto:info@decorhaven.com"><i class="fas fa-envelope"></i> info@decorhaven.com</a>
                </div>
                <div>
                    <a href="#"><i class="fas fa-map-marker-alt"></i> Find Our Store</a>
                </div>
            </div>
        </div>
        <nav>
            <div class="logo">
                <i class="fas fa-couch"></i>
                Décor Haven
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#categories">Categories</a></li>
                <li><a href="#products">Products</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="nav-icons">
                <a href="#search"><i class="fas fa-search"></i></a>
                <a href="#wishlist">
                    <i class="fas fa-heart"></i>
                    <span class="wishlist-count">0</span>
                </a>
                <a href="#cart">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </a>
                <a href="#account"><i class="fas fa-user"></i></a>
            </div>
            <div class="mobile-menu">
                <i class="fas fa-bars"></i>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1>Transform Your Space</h1>
            <p>Discover premium home decoration pieces that bring elegance and style to every corner of your home</p>
            <a href="#products" class="btn">Shop Now</a>
            <a href="#categories" class="btn btn-secondary">Explore Categories</a>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories" id="categories">
        <h2 class="section-title">Shop by Category</h2>
        <div class="category-grid">
            <div class="category-card" onclick="filterProducts('furniture')">
                <div class="category-image">
                    <i class="fas fa-couch"></i>
                </div>
                <div class="category-info">
                    <h3>Furniture</h3>
                    <p>Modern & Classic Pieces</p>
                </div>
            </div>
            <div class="category-card" onclick="filterProducts('lighting')">
                <div class="category-image">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <div class="category-info">
                    <h3>Lighting</h3>
                    <p>Illuminate Your Space</p>
                </div>
            </div>
            <div class="category-card" onclick="filterProducts('wall-art')">
                <div class="category-image">
                    <i class="fas fa-palette"></i>
                </div>
                <div class="category-info">
                    <h3>Wall Art</h3>
                    <p>Express Your Style</p>
                </div>
            </div>
            <div class="category-card" onclick="filterProducts('accessories')">
                <div class="category-image">
                    <i class="fas fa-gift"></i>
                </div>
                <div class="category-info">
                    <h3>Accessories</h3>
                    <p>Perfect Finishing Touches</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products" id="products">
        <h2 class="section-title">Featured Products</h2>
        <div class="filter-bar">
            <button class="filter-btn active" onclick="filterProducts('all')">All Products</button>
            <button class="filter-btn" onclick="filterProducts('furniture')">Furniture</button>
            <button class="filter-btn" onclick="filterProducts('lighting')">Lighting</button>
            <button class="filter-btn" onclick="filterProducts('wall-art')">Wall Art</button>
            <button class="filter-btn" onclick="filterProducts('accessories')">Accessories</button>
        </div>
        <div class="product-grid" id="productGrid">
            <!-- Product 1 -->
            <div class="product-card" data-category="furniture">
                <span class="product-badge new">New</span>
                <div class="product-image">
                    <i class="fas fa-chair"></i>
                    <div class="product-overlay">
                        <button class="overlay-btn" onclick="quickView(1)"><i class="fas fa-eye"></i></button>
                        <button class="overlay-btn" onclick="addToWishlist(1)"><i class="fas fa-heart"></i></button>
                        <button class="overlay-btn" onclick="addToCart(1)"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">Furniture</div>
                    <h3 class="product-name">Modern Velvet Armchair</h3>
                    <div class="product-rating">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </span>
                        <span class="rating-count">(128)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">$599</span>
                        <span class="old-price">$799</span>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(1)">
                        <i class="fas fa-shopping-cart"></i>
                        Add to Cart
                    </button>
                </div>
            </div>

            <!-- Product 2 -->
            <div class="product-card" data-category="lighting">
                <span class="product-badge">Sale</span>
                <div class="product-image">
                    <i class="fas fa-lamp"></i>
                    <div class="product-overlay">
                        <button class="overlay-btn" onclick="quickView(2)"><i class="fas fa-eye"></i></button>
                        <button class="overlay-btn" onclick="addToWishlist(2)"><i class="fas fa-heart"></i></button>
                        <button class="overlay-btn" onclick="addToCart(2)"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">Lighting</div>
                    <h3 class="product-name">Crystal Table Lamp</h3>
                    <div class="product-rating">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </span>
                        <span class="rating-count">(95)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">$249</span>
                        <span class="old-price">$349</span>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(2)">
                        <i class="fas fa-shopping-cart"></i>
                        Add to Cart
                    </button>
                </div>
            </div>

            <!-- Product 3 -->
            <div class="product-card" data-category="wall-art">
                <span class="product-badge new">New</span>
                <div class="product-image">
                    <i class="fas fa-image"></i>
                    <div class="product-overlay">
                        <button class="overlay-btn" onclick="quickView(3)"><i class="fas fa-eye"></i></button>
                        <button class="overlay-btn" onclick="addToWishlist(3)"><i class="fas fa-heart"></i></button>
                        <button class="overlay-btn" onclick="addToCart(3)"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">Wall Art</div>
                    <h3 class="product-name">Abstract Canvas Set</h3>
                    <div class="product-rating">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </span>
                        <span class="rating-count">(67)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">$189</span>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(3)">
                        <i class="fas fa-shopping-cart"></i>
                        Add to Cart
                    </button>
                </div>
            </div>

            <!-- Product 4 -->
            <div class="product-card" data-category="accessories">
                <div class="product-image">
                    <i class="fas fa-vase"></i>
                    <div class="product-overlay">
                        <button class="overlay-btn" onclick="quickView(4)"><i class="fas fa-eye"></i></button>
                        <button class="overlay-btn" onclick="addToWishlist(4)"><i class="fas fa-heart"></i></button>
                        <button class="overlay-btn" onclick="addToCart(4)"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">Accessories</div>
                    <h3 class="product-name">Ceramic Vase Collection</h3>
                    <div class="product-rating">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </span>
                        <span class="rating-count">(142)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">$129</span>
                        <span class="old-price">$179</span>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(4)">
                        <i class="fas fa-shopping-cart"></i>
                        Add to Cart
                    </button>
                </div>
            </div>

            <!-- Product 5 -->
            <div class="product-card" data-category="furniture">
                <span class="product-badge">Sale</span>
                <div class="product-image">
                    <i class="fas fa-bed"></i>
                    <div class="product-overlay">
                        <button class="overlay-btn" onclick="quickView(5)"><i class="fas fa-eye"></i></button>
                        <button class="overlay-btn" onclick="addToWishlist(5)"><i class="fas fa-heart"></i></button>
                        <button class="overlay-btn" onclick="addToCart(5)"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">Furniture</div>
                    <h3 class="product-name">Luxury Bed Frame</h3>
                    <div class="product-rating">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </span>
                        <span class="rating-count">(203)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">$1,299</span>
                        <span class="old-price">$1,599</span>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(5)">
                        <i class="fas fa-shopping-cart"></i>
                        Add to Cart
                    </button>
                </div>
            </div>

            <!-- Product 6 -->
            <div class="product-card" data-category="lighting">
                <div class="product-image">
                    <i class="fas fa-chandelier"></i>
                    <div class="product-overlay">
                        <button class="overlay-btn" onclick="quickView(6)"><i class="fas fa-eye"></i></button>
                        <button class="overlay-btn" onclick="addToWishlist(6)"><i class="fas fa-heart"></i></button>
                        <button class="overlay-btn" onclick="addToCart(6)"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">Lighting</div>
                    <h3 class="product-name">Modern Chandelier</h3>
                    <div class="product-rating">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </span>
                        <span class="rating-count">(87)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">$899</span>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(6)">
                        <i class="fas fa-shopping-cart"></i>
                        Add to Cart
                    </button>
                </div>
            </div>

            <!-- Product 7 -->
            <div class="product-card" data-category="wall-art">
                <div class="product-image">
                    <i class="fas fa-frame"></i>
                    <div class="product-overlay">
                        <button class="overlay-btn" onclick="quickView(7)"><i class="fas fa-eye"></i></button>
                        <button class="overlay-btn" onclick="addToWishlist(7)"><i class="fas fa-heart"></i></button>
                        <button class="overlay-btn" onclick="addToCart(7)"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">Wall Art</div>
                    <h3 class="product-name">Gold Mirror Frame</h3>
                    <div class="product-rating">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </span>
                        <span class="rating-count">(54)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">$349</span>
                        <span class="old-price">$449</span>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(7)">
                        <i class="fas fa-shopping-cart"></i>
                        Add to Cart
                    </button>
                </div>
            </div>

            <!-- Product 8 -->
            <div class="product-card" data-category="accessories">
                <span class="product-badge new">New</span>
                <div class="product-image">
                    <i class="fas fa-candle"></i>
                    <div class="product-overlay">
                        <button class="overlay-btn" onclick="quickView(8)"><i class="fas fa-eye"></i></button>
                        <button class="overlay-btn" onclick="addToWishlist(8)"><i class="fas fa-heart"></i></button>
                        <button class="overlay-btn" onclick="addToCart(8)"><i class="fas fa-shopping-cart"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">Accessories</div>
                    <h3 class="product-name">Luxury Candle Set</h3>
                    <div class="product-rating">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </span>
                        <span class="rating-count">(176)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">$79</span>
                    </div>
                    <button class="add-to-cart" onclick="addToCart(8)">
                        <i class="fas fa-shopping-cart"></i>
                        Add to Cart
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="about">
        <h2 class="section-title">Why Choose Us</h2>
        <div class="features-grid">
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fas fa-shipping-fast"></i>
                </div>
                <h3>Free Shipping</h3>
                <p>Free delivery on orders over $200. Fast and reliable shipping worldwide.</p>
            </div>
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fas fa-undo"></i>
                </div>
                <h3>Easy Returns</h3>
                <p>30-day return policy. Shop with confidence and peace of mind.</p>
            </div>
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h3>Secure Payment</h3>
                <p>100% secure payment processing. Your data is always protected.</p>
            </div>
            <div class="feature-item">
                <div class="feature-icon">
                    <i class="fas fa-headset"></i>
                </div>
                <h3>24/7 Support</h3>
                <p>Dedicated customer support team ready to help you anytime.</p>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter">
        <h2>Subscribe to Our Newsletter</h2>
        <p>Get the latest updates on new products and exclusive offers</p>
        <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
            <input type="email" placeholder="Enter your email address" required>
            <button type="submit">Subscribe</button>
        </form>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Décor Haven</h3>
                <p>Your premier destination for luxury home decoration. We curate the finest pieces to transform your living spaces into extraordinary environments.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-pinterest"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#categories">Categories</a></li>
                    <li><a href="#products">Products</a></li>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Customer Service</h3>
                <ul>
                    <li><a href="#">Shipping Information</a></li>
                    <li><a href="#">Returns & Exchanges</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact Us</h3>
                <ul>
                    <li><i class="fas fa-map-marker-alt"></i> 123 Design Street, NY 10001</li>
                    <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
                    <li><i class="fas fa-envelope"></i> info@decorhaven.com</li>
                    <li><i class="fas fa-clock"></i> Mon - Sat: 9AM - 8PM</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Décor Haven. All rights reserved. | Designed with <i class="fas fa-heart"></i> for your home</p>
        </div>
    </footer>

    <!-- Search Modal -->
    <div class="modal-overlay" id="searchModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('searchModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="search-content">
                <h2><i class="fas fa-search"></i> Search Products</h2>
                
                <!-- Search History (shows when search is empty) -->
                <div class="search-history" id="searchHistory" style="display: none;">
                    <h3>Recent Searches</h3>
                    <div class="search-history-list" id="searchHistoryList">
                        <!-- History items will be inserted here -->
                    </div>
                </div>

                <!-- Search Bar -->
                <div class="search-bar">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="Search for products, categories..."
                        autocomplete="off">
                    <button onclick="performSearch()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>

                <!-- Category Filters -->
                <div class="search-filters">
                    <button class="search-filter-btn active" data-category="all" onclick="filterSearchResults('all')">
                        All
                    </button>
                    <button class="search-filter-btn" data-category="furniture" onclick="filterSearchResults('furniture')">
                        <i class="fas fa-couch"></i> Furniture
                    </button>
                    <button class="search-filter-btn" data-category="lighting" onclick="filterSearchResults('lighting')">
                        <i class="fas fa-lightbulb"></i> Lighting
                    </button>
                    <button class="search-filter-btn" data-category="wall-art" onclick="filterSearchResults('wall-art')">
                        <i class="fas fa-palette"></i> Wall Art
                    </button>
                    <button class="search-filter-btn" data-category="accessories" onclick="filterSearchResults('accessories')">
                        <i class="fas fa-gift"></i> Accessories
                    </button>
                </div>

                <!-- Results Header -->
                <div class="search-results-header" id="searchResultsHeader" style="display: none;">
                    <div class="search-results-count" id="searchResultsCount">
                        0 Results Found
                    </div>
                    <div class="search-sort">
                        <label>Sort by:</label>
                        <select id="searchSortSelect" onchange="sortSearchResults()">
                            <option value="relevance">Relevance</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="name">Name: A to Z</option>
                            <option value="rating">Rating</option>
                        </select>
                    </div>
                </div>

                <!-- Search Results -->
                <div class="search-results" id="searchResults">
                    <!-- Results will be dynamically inserted here -->
                </div>

                <!-- No Results State -->
                <div class="search-no-results" id="searchNoResults" style="display: none;">
                    <i class="fas fa-search"></i>
                    <h3>No products found</h3>
                    <p>Try searching with different keywords</p>
                    <div class="search-suggestions">
                        <h4>Popular Searches:</h4>
                        <div class="search-suggestions-list">
                            <span class="suggestion-tag" onclick="searchSuggestion('chair')">Chair</span>
                            <span class="suggestion-tag" onclick="searchSuggestion('lamp')">Lamp</span>
                            <span class="suggestion-tag" onclick="searchSuggestion('art')">Art</span>
                            <span class="suggestion-tag" onclick="searchSuggestion('vase')">Vase</span>
                            <span class="suggestion-tag" onclick="searchSuggestion('mirror')">Mirror</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick View Modal -->
    <div class="modal-overlay" id="quickViewModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('quickViewModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="quick-view-content">
                <div class="quick-view-image" id="quickViewImage">
                    <i class="fas fa-box"></i>
                </div>
                <div class="quick-view-details">
                    <div class="product-category" id="quickViewCategory">Category</div>
                    <h2 id="quickViewName">Product Name</h2>
                    <div class="product-rating">
                        <span class="stars" id="quickViewRating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </span>
                        <span class="rating-count" id="quickViewReviews">(0)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price" id="quickViewPrice">$0</span>
                        <span class="old-price" id="quickViewOldPrice"></span>
                    </div>
                    <p class="product-description" id="quickViewDescription">
                        Premium quality product crafted with attention to detail. Perfect for enhancing your living space with style and elegance.
                    </p>
                    <div class="quantity-selector">
                        <button onclick="decreaseQuantity()"><i class="fas fa-minus"></i></button>
                        <input type="number" id="quickViewQuantity" value="1" min="1" readonly>
                        <button onclick="increaseQuantity()"><i class="fas fa-plus"></i></button>
                    </div>
                    <div class="quick-view-actions">
                        <button class="btn" onclick="addToCartFromQuickView()">
                            <i class="fas fa-shopping-cart"></i> Add to Cart
                        </button>
                        <button class="btn btn-secondary" onclick="addToWishlistFromQuickView()">
                            <i class="fas fa-heart"></i> Wishlist
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Modal -->
    <div class="modal-overlay" id="accountModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('accountModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="account-content">
                <div class="account-tabs">
                    <button class="account-tab active" onclick="switchAccountTab('login')">Login</button>
                    <button class="account-tab" onclick="switchAccountTab('register')">Register</button>
                    <button class="account-tab" id="profileTab" style="display: none;" onclick="switchAccountTab('profile')">Profile</button>
                    <button class="account-tab" id="ordersTab" style="display: none;" onclick="switchAccountTab('orders')">Orders</button>
                </div>

                <!-- Login Tab -->
                <div class="tab-content active" id="loginTab">
                    <form onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label for="loginEmail">Email Address</label>
                            <input type="email" id="loginEmail" required placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" required placeholder="Enter your password">
                        </div>
                        <button type="submit" class="btn" style="width: 100%;">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </form>
                </div>

                <!-- Register Tab -->
                <div class="tab-content" id="registerTab">
                    <form onsubmit="handleRegister(event)">
                        <div class="form-group">
                            <label for="registerName">Full Name</label>
                            <input type="text" id="registerName" required placeholder="Enter your full name">
                        </div>
                        <div class="form-group">
                            <label for="registerEmail">Email Address</label>
                            <input type="email" id="registerEmail" required placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label for="registerPassword">Password</label>
                            <input type="password" id="registerPassword" required placeholder="Create a password">
                        </div>
                        <div class="form-group">
                            <label for="registerConfirmPassword">Confirm Password</label>
                            <input type="password" id="registerConfirmPassword" required placeholder="Confirm your password">
                        </div>
                        <button type="submit" class="btn" style="width: 100%;">
                            <i class="fas fa-user-plus"></i> Register
                        </button>
                    </form>
                </div>

                <!-- Profile Tab -->
                <div class="tab-content" id="profileTabContent">
                    <!-- View Profile Mode -->
                    <div id="profileViewMode">
                        <div class="user-profile-info">
                            <h3>Account Information</h3>
                            <div class="profile-detail">
                                <strong>Name:</strong>
                                <span id="profileName">-</span>
                            </div>
                            <div class="profile-detail">
                                <strong>Email:</strong>
                                <span id="profileEmail">-</span>
                            </div>
                            <div class="profile-detail">
                                <strong>Phone:</strong>
                                <span id="profilePhone">-</span>
                            </div>
                            <div class="profile-detail">
                                <strong>Address:</strong>
                                <span id="profileAddress">-</span>
                            </div>
                            <div class="profile-detail">
                                <strong>City:</strong>
                                <span id="profileCity">-</span>
                            </div>
                            <div class="profile-detail">
                                <strong>Member Since:</strong>
                                <span id="profileMemberSince">-</span>
                            </div>
                        </div>
                        <button class="btn" onclick="toggleEditMode()" style="width: 100%; margin-bottom: 10px;">
                            <i class="fas fa-edit"></i> Edit Profile
                        </button>
                        <button class="btn" onclick="handleLogout()" style="width: 100%; background: #e74c3c;">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>

                    <!-- Edit Profile Mode -->
                    <div id="profileEditMode" style="display: none;">
                        <form onsubmit="handleProfileUpdate(event)">
                            <h3>Edit Profile</h3>
                            <div class="form-group">
                                <label for="editFirstName">First Name</label>
                                <input type="text" id="editFirstName" required placeholder="Enter first name">
                            </div>
                            <div class="form-group">
                                <label for="editLastName">Last Name</label>
                                <input type="text" id="editLastName" required placeholder="Enter last name">
                            </div>
                            <div class="form-group">
                                <label for="editPhone">Phone Number</label>
                                <input type="tel" id="editPhone" placeholder="Enter phone number">
                            </div>
                            <div class="form-group">
                                <label for="editAddress">Address</label>
                                <input type="text" id="editAddress" placeholder="Enter address">
                            </div>
                            <div class="form-group">
                                <label for="editCity">City</label>
                                <input type="text" id="editCity" placeholder="Enter city">
                            </div>
                            <div class="form-group">
                                <label for="editPostalCode">Postal Code</label>
                                <input type="text" id="editPostalCode" placeholder="Enter postal code">
                            </div>
                            <div class="form-group">
                                <label for="editCountry">Country</label>
                                <input type="text" id="editCountry" placeholder="Enter country">
                            </div>
                            <button type="submit" class="btn" style="width: 100%; margin-bottom: 10px;">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                            <button type="button" class="btn" onclick="toggleEditMode()" style="width: 100%; background: #95a5a6;">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Orders Tab -->
                <div class="tab-content" id="ordersTabContent">
                    <div class="orders-list" id="ordersList">
                        <div class="order-item">
                            <div class="order-header">
                                <span class="order-id">Order #12345</span>
                                <span class="order-status completed">Completed</span>
                            </div>
                            <div class="profile-detail">
                                <strong>Date:</strong>
                                <span>Nov 20, 2024</span>
                            </div>
                            <div class="profile-detail">
                                <strong>Total:</strong>
                                <span>$1,299.00</span>
                            </div>
                            <div class="profile-detail">
                                <strong>Items:</strong>
                                <span>3 products</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal-overlay" id="cartModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('cartModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="cart-content">
                <h2><i class="fas fa-shopping-cart"></i> Shopping Cart</h2>
                
                <div id="cartItemsContainer">
                    <!-- Cart items will be dynamically inserted here -->
                </div>

                <!-- Empty Cart State -->
                <div class="cart-empty" id="cartEmpty" style="display: none;">
                    <i class="fas fa-shopping-cart"></i>
                    <h3>Your cart is empty</h3>
                    <p>Looks like you haven't added anything to your cart yet</p>
                    <button class="btn" onclick="closeModal('cartModal')">
                        Continue Shopping
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="modal-overlay" id="checkoutModal">
        <div class="modal modal-large">
            <button class="modal-close" onclick="closeModal('checkoutModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="checkout-content">
                <h2><i class="fas fa-credit-card"></i> Checkout</h2>
                
                <div class="checkout-grid">
                    <!-- Left Side: Shipping & Payment -->
                    <div class="checkout-forms">
                        <form id="checkoutForm" onsubmit="placeOrder(event)">
                            <!-- Shipping Information -->
                            <div class="checkout-section">
                                <h3><i class="fas fa-shipping-fast"></i> Shipping Information</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="checkoutFirstName">First Name *</label>
                                        <input type="text" id="checkoutFirstName" required placeholder="John">
                                    </div>
                                    <div class="form-group">
                                        <label for="checkoutLastName">Last Name *</label>
                                        <input type="text" id="checkoutLastName" required placeholder="Doe">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="checkoutEmail">Email Address *</label>
                                    <input type="email" id="checkoutEmail" required placeholder="john@example.com">
                                </div>
                                <div class="form-group">
                                    <label for="checkoutPhone">Phone Number *</label>
                                    <input type="tel" id="checkoutPhone" required placeholder="+1 234 567 8900">
                                </div>
                                <div class="form-group">
                                    <label for="checkoutAddress">Street Address *</label>
                                    <input type="text" id="checkoutAddress" required placeholder="123 Main Street">
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="checkoutCity">City *</label>
                                        <input type="text" id="checkoutCity" required placeholder="New York">
                                    </div>
                                    <div class="form-group">
                                        <label for="checkoutPostalCode">Postal Code *</label>
                                        <input type="text" id="checkoutPostalCode" required placeholder="10001">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="checkoutCountry">Country *</label>
                                    <input type="text" id="checkoutCountry" required placeholder="United States">
                                </div>
                            </div>

                            <!-- Payment Method -->
                            <div class="checkout-section">
                                <h3><i class="fas fa-credit-card"></i> Payment Method</h3>
                                <div class="payment-methods">
                                    <label class="payment-method">
                                        <input type="radio" name="paymentMethod" value="CreditCard" checked>
                                        <div class="payment-option">
                                            <i class="fas fa-credit-card"></i>
                                            <span>Credit Card</span>
                                        </div>
                                    </label>
                                    <label class="payment-method">
                                        <input type="radio" name="paymentMethod" value="PayPal">
                                        <div class="payment-option">
                                            <i class="fab fa-paypal"></i>
                                            <span>PayPal</span>
                                        </div>
                                    </label>
                                    <label class="payment-method">
                                        <input type="radio" name="paymentMethod" value="CashOnDelivery">
                                        <div class="payment-option">
                                            <i class="fas fa-money-bill-wave"></i>
                                            <span>Cash on Delivery</span>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Customer Notes -->
                            <div class="checkout-section">
                                <h3><i class="fas fa-comment"></i> Order Notes (Optional)</h3>
                                <div class="form-group">
                                    <textarea id="checkoutNotes" rows="3" placeholder="Any special instructions for your order?"></textarea>
                                </div>
                            </div>
                            
                            <!-- Hidden submit button inside form -->
                            <button type="submit" id="hiddenSubmitBtn" style="display: none;">Submit</button>
                        </form>
                    </div>

                    <!-- Right Side: Order Summary -->
                    <div class="checkout-summary">
                        <h3>Order Summary</h3>
                        <div id="checkoutItems"></div>
                        <div class="checkout-totals">
                            <div class="checkout-total-row">
                                <span>Subtotal:</span>
                                <span id="checkoutSubtotal">$0.00</span>
                            </div>
                            <div class="checkout-total-row">
                                <span>Tax (10%):</span>
                                <span id="checkoutTax">$0.00</span>
                            </div>
                            <div class="checkout-total-row">
                                <span>Shipping:</span>
                                <span id="checkoutShipping">FREE</span>
                            </div>
                            <div class="checkout-total-row total">
                                <span>Total:</span>
                                <span id="checkoutTotal">$0.00</span>
                            </div>
                        </div>
                        <button type="button" onclick="submitCheckoutForm()" class="btn btn-large" id="placeOrderBtn">
                            <i class="fas fa-lock"></i> Place Order
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Wishlist Modal -->
    <div class="modal-overlay" id="wishlistModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('wishlistModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="wishlist-content">
                <h2><i class="fas fa-heart"></i> My Wishlist</h2>
                
                <div class="wishlist-grid" id="wishlistGrid">
                    <!-- Wishlist items will be dynamically inserted here -->
                </div>

                <!-- Empty Wishlist State -->
                <div class="wishlist-empty" id="wishlistEmpty" style="display: none;">
                    <i class="fas fa-heart"></i>
                    <h3>Your wishlist is empty</h3>
                    <p>Save your favorite items to your wishlist</p>
                    <button class="btn" onclick="closeModal('wishlistModal')">
                        Browse Products
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // API Configuration - Auto-detect environment
        const API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? 'http://localhost:5000/api'  // Local development
            : '/api';  // Production (Netlify will proxy to backend)
        
        console.log('🌐 API Base URL:', API_BASE_URL);
        console.log('🏠 Environment:', window.location.hostname === 'localhost' ? 'Development' : 'Production');
        
        let isBackendConnected = false;
        
        // Check if backend is available
        async function checkBackendConnection() {
            try {
                const response = await fetch(`${API_BASE_URL}/products`, {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                isBackendConnected = response.ok;
                updateConnectionStatus();
                return isBackendConnected;
            } catch (error) {
                isBackendConnected = false;
                updateConnectionStatus();
                return false;
            }
        }

        // Update connection status indicator
        function updateConnectionStatus() {
            // You can add a visual indicator here if desired
            if (isBackendConnected) {
                console.log('✅ Backend connected');
            } else {
                console.log('⚠️ Backend not available - using offline mode');
            }
        }
        
        // Helper function to make API calls
        async function apiCall(endpoint, options = {}) {
            const token = localStorage.getItem('token');
            const headers = {
                'Content-Type': 'application/json',
                ...options.headers
            };

            if (token) {
                headers['Authorization'] = `Bearer ${token}`;
            }

            try {
                console.log(`API Call: ${options.method || 'GET'} ${API_BASE_URL}${endpoint}`);
                
                const response = await fetch(`${API_BASE_URL}${endpoint}`, {
                    ...options,
                    headers
                });

                console.log(`API Response Status: ${response.status} ${response.statusText}`);

                // Try to parse JSON response
                const contentType = response.headers.get('content-type');
                if (contentType && contentType.includes('application/json')) {
                    const data = await response.json();
                    console.log('API Response Data:', data);
                    
                    // If it's a validation error (400), extract the validation messages
                    if (response.status === 400 && data.errors) {
                        const validationErrors = Object.values(data.errors).flat().join(', ');
                        return {
                            success: false,
                            message: validationErrors || data.message || 'Validation failed'
                        };
                    }
                    
                    return data;
                } else {
                    // Non-JSON response
                    const text = await response.text();
                    console.error('Non-JSON response:', text);
                    return {
                        success: false,
                        message: `Server error: ${response.status} ${response.statusText}`
                    };
                }
            } catch (error) {
                console.error('API Error:', error);
                return {
                    success: false,
                    message: `Network error: ${error.message}. Is the backend running at ${API_BASE_URL}?`
                };
            }
        }

        // Cart functionality
        let cartCount = 0;
        const cartCountElement = document.querySelector('.cart-count');

        // Filter products
        function filterProducts(category) {
            const products = document.querySelectorAll('.product-card');
            const filterBtns = document.querySelectorAll('.filter-btn');
            
            // Update active button
            filterBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Filter products
            products.forEach(product => {
                if (category === 'all' || product.dataset.category === category) {
                    product.style.display = 'block';
                    product.style.animation = 'fadeInUp 0.5s';
                } else {
                    product.style.display = 'none';
                }
            });
        }

        // Newsletter subscription
        function subscribeNewsletter(event) {
            event.preventDefault();
            const email = event.target.querySelector('input').value;
            showNotification('Thank you for subscribing!', 'success');
            event.target.reset();
        }

        // Notification system
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#27ae60' : '#3498db'};
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.2); }
            }
            @keyframes slideIn {
                from { transform: translateX(400px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(400px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Mobile menu toggle
        const mobileMenu = document.querySelector('.mobile-menu');
        const navLinks = document.querySelector('.nav-links');
        
        mobileMenu.addEventListener('click', () => {
            navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
            navLinks.style.flexDirection = 'column';
            navLinks.style.position = 'absolute';
            navLinks.style.top = '100%';
            navLinks.style.left = '0';
            navLinks.style.right = '0';
            navLinks.style.background = 'white';
            navLinks.style.padding = '20px';
            navLinks.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
        });

        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 0.6s ease forwards';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.product-card, .category-card, .feature-item').forEach(el => {
            observer.observe(el);
        });

        // ===================================
        // SEARCH FUNCTIONS
        // ===================================

        let searchResults = [];
        let currentSearchQuery = '';
        let currentSearchCategory = 'all';

        // Get search history from localStorage
        function getSearchHistory() {
            return JSON.parse(localStorage.getItem('searchHistory') || '[]');
        }

        // Save search to history
        function saveSearchHistory(query) {
            if (!query.trim()) return;
            
            let history = getSearchHistory();
            // Remove if already exists
            history = history.filter(item => item.toLowerCase() !== query.toLowerCase());
            // Add to beginning
            history.unshift(query);
            // Keep only last 5 searches
            history = history.slice(0, 5);
            
            localStorage.setItem('searchHistory', JSON.stringify(history));
            displaySearchHistory();
        }

        // Display search history
        function displaySearchHistory() {
            const history = getSearchHistory();
            const historySection = document.getElementById('searchHistory');
            const historyList = document.getElementById('searchHistoryList');

            if (history.length === 0) {
                historySection.style.display = 'none';
                return;
            }

            historySection.style.display = 'block';
            historyList.innerHTML = history.map(item => `
                <div class="search-history-item" onclick="searchFromHistory('${item}')">
                    <i class="fas fa-history"></i>
                    ${item}
                </div>
            `).join('');
        }

        // Search from history
        function searchFromHistory(query) {
            document.getElementById('searchInput').value = query;
            performSearch();
        }

        // Search suggestion click
        function searchSuggestion(query) {
            document.getElementById('searchInput').value = query;
            performSearch();
        }

        // Perform search
        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            
            if (!query) {
                displaySearchHistory();
                document.getElementById('searchResultsHeader').style.display = 'none';
                document.getElementById('searchResults').innerHTML = '';
                document.getElementById('searchNoResults').style.display = 'none';
                return;
            }

            currentSearchQuery = query;
            saveSearchHistory(query);
            
            // Hide search history when showing results
            document.getElementById('searchHistory').style.display = 'none';

            // Search in sample products
            searchResults = Object.values(sampleProducts).filter(product => {
                const searchLower = query.toLowerCase();
                return (
                    product.name.toLowerCase().includes(searchLower) ||
                    product.category.toLowerCase().includes(searchLower)
                );
            });

            // Apply category filter if active
            if (currentSearchCategory !== 'all') {
                searchResults = searchResults.filter(product => 
                    product.category.toLowerCase().replace(' ', '-') === currentSearchCategory
                );
            }

            displaySearchResults();
        }

        // Filter search results by category
        function filterSearchResults(category) {
            currentSearchCategory = category;

            // Update active button
            document.querySelectorAll('.search-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Re-run search with filter
            performSearch();
        }

        // Sort search results
        function sortSearchResults() {
            const sortBy = document.getElementById('searchSortSelect').value;

            switch (sortBy) {
                case 'price-low':
                    searchResults.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high':
                    searchResults.sort((a, b) => b.price - a.price);
                    break;
                case 'name':
                    searchResults.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'rating':
                    searchResults.sort((a, b) => b.rating - a.rating);
                    break;
                default: // relevance
                    // Keep current order (already sorted by relevance)
                    break;
            }

            displaySearchResults();
        }

        // Display search results
        function displaySearchResults() {
            const resultsContainer = document.getElementById('searchResults');
            const noResultsDiv = document.getElementById('searchNoResults');
            const resultsHeader = document.getElementById('searchResultsHeader');
            const resultsCount = document.getElementById('searchResultsCount');

            if (searchResults.length === 0) {
                resultsHeader.style.display = 'none';
                resultsContainer.innerHTML = '';
                noResultsDiv.style.display = 'block';
                return;
            }

            noResultsDiv.style.display = 'none';
            resultsHeader.style.display = 'flex';
            resultsCount.textContent = `${searchResults.length} Result${searchResults.length !== 1 ? 's' : ''} Found`;

            resultsContainer.innerHTML = searchResults.map((product, index) => {
                // Find product ID (reverse lookup)
                const productId = Object.keys(sampleProducts).find(
                    key => sampleProducts[key] === product
                );

                return `
                    <div class="search-result-item">
                        <div class="search-result-image">
                            <i class="${product.icon}"></i>
                        </div>
                        <div class="search-result-info">
                            <div class="search-result-category">${product.category}</div>
                            <div class="search-result-name">${product.name}</div>
                            <div class="search-result-price">$${product.price}</div>
                            <div class="search-result-actions">
                                <button class="search-result-cart" onclick="addToCartFromSearch(${productId})">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                                <button class="search-result-view" onclick="quickViewFromSearch(${productId})">
                                    <i class="fas fa-eye"></i> View
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Add to cart from search
        function addToCartFromSearch(productId) {
            addToCartLocal(productId, 1);
        }

        // Quick view from search
        function quickViewFromSearch(productId) {
            closeModal('searchModal');
            setTimeout(() => quickView(productId), 300);
        }

        // Open search modal
        function openSearchModal() {
            openModal('searchModal');
            document.getElementById('searchInput').focus();
            displaySearchHistory();
            
            // Clear previous search
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').innerHTML = '';
            document.getElementById('searchNoResults').style.display = 'none';
            document.getElementById('searchResultsHeader').style.display = 'none';
            
            // Reset category filter
            currentSearchCategory = 'all';
            document.querySelectorAll('.search-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('.search-filter-btn[data-category="all"]').classList.add('active');
        }

        // Search input event listener
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                // Search on Enter key
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });

                // Real-time search (optional - debounced)
                let searchTimeout;
                searchInput.addEventListener('input', function() {
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(() => {
                        if (this.value.length >= 2) {
                            performSearch();
                        } else if (this.value.length === 0) {
                            displaySearchHistory();
                            document.getElementById('searchResultsHeader').style.display = 'none';
                            document.getElementById('searchResults').innerHTML = '';
                            document.getElementById('searchNoResults').style.display = 'none';
                        }
                    }, 300);
                });
            }
        });

        // ===================================
        // MODAL FUNCTIONS
        // ===================================

        // Open modal
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        // Close modal
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Close modal when clicking outside
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal(this.id);
                }
            });
        });

        // ===================================
        // QUICK VIEW FUNCTIONS
        // ===================================

        let currentQuickViewProduct = null;

        // Sample product data (replace with API calls in production)
        const sampleProducts = {
            1: { name: 'Modern Velvet Armchair', category: 'Furniture', price: 599, oldPrice: 799, icon: 'fas fa-chair', rating: 4.5, reviews: 128 },
            2: { name: 'Crystal Table Lamp', category: 'Lighting', price: 249, oldPrice: 349, icon: 'fas fa-lamp', rating: 5, reviews: 95 },
            3: { name: 'Abstract Canvas Set', category: 'Wall Art', price: 189, oldPrice: null, icon: 'fas fa-image', rating: 4, reviews: 67 },
            4: { name: 'Ceramic Vase Collection', category: 'Accessories', price: 129, oldPrice: 179, icon: 'fas fa-vase', rating: 5, reviews: 142 },
            5: { name: 'Luxury Bed Frame', category: 'Furniture', price: 1299, oldPrice: 1599, icon: 'fas fa-bed', rating: 4.5, reviews: 203 },
            6: { name: 'Modern Chandelier', category: 'Lighting', price: 899, oldPrice: null, icon: 'fas fa-chandelier', rating: 5, reviews: 87 },
            7: { name: 'Gold Mirror Frame', category: 'Wall Art', price: 349, oldPrice: 449, icon: 'fas fa-frame', rating: 4, reviews: 54 },
            8: { name: 'Luxury Candle Set', category: 'Accessories', price: 79, oldPrice: null, icon: 'fas fa-candle', rating: 5, reviews: 176 }
        };

        function quickView(productId) {
            const product = sampleProducts[productId];
            if (!product) return;

            currentQuickViewProduct = productId;

            // Update modal content
            document.getElementById('quickViewImage').innerHTML = `<i class="${product.icon}"></i>`;
            document.getElementById('quickViewCategory').textContent = product.category;
            document.getElementById('quickViewName').textContent = product.name;
            document.getElementById('quickViewPrice').textContent = `$${product.price}`;
            document.getElementById('quickViewReviews').textContent = `(${product.reviews})`;
            
            if (product.oldPrice) {
                document.getElementById('quickViewOldPrice').textContent = `$${product.oldPrice}`;
                document.getElementById('quickViewOldPrice').style.display = 'inline';
            } else {
                document.getElementById('quickViewOldPrice').style.display = 'none';
            }

            // Update rating stars
            const stars = getStarRating(product.rating);
            document.getElementById('quickViewRating').innerHTML = stars;

            // Reset quantity
            document.getElementById('quickViewQuantity').value = 1;

            openModal('quickViewModal');
        }

        function increaseQuantity() {
            const input = document.getElementById('quickViewQuantity');
            input.value = parseInt(input.value) + 1;
        }

        function decreaseQuantity() {
            const input = document.getElementById('quickViewQuantity');
            if (parseInt(input.value) > 1) {
                input.value = parseInt(input.value) - 1;
            }
        }

        function addToCartFromQuickView() {
            const quantity = parseInt(document.getElementById('quickViewQuantity').value);
            if (currentQuickViewProduct) {
                addToCartLocal(currentQuickViewProduct, quantity);
                closeModal('quickViewModal');
            }
        }

        function addToWishlistFromQuickView() {
            if (currentQuickViewProduct) {
                addToWishlistLocal(currentQuickViewProduct);
                closeModal('quickViewModal');
            }
        }

        // ===================================
        // ACCOUNT FUNCTIONS
        // ===================================

        function switchAccountTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.account-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Activate the correct tab button
            const tabButtons = {
                'login': document.querySelector('.account-tab[onclick*="login"]'),
                'register': document.querySelector('.account-tab[onclick*="register"]'),
                'profile': document.getElementById('profileTab'),
                'orders': document.getElementById('ordersTab')
            };
            
            if (tabButtons[tabName]) {
                tabButtons[tabName].classList.add('active');
            }
            
            // Show selected tab content
            if (tabName === 'login') {
                document.getElementById('loginTab').classList.add('active');
            } else if (tabName === 'register') {
                document.getElementById('registerTab').classList.add('active');
            } else if (tabName === 'profile') {
                document.getElementById('profileTabContent').classList.add('active');
                loadUserProfile();
            } else if (tabName === 'orders') {
                document.getElementById('ordersTabContent').classList.add('active');
                loadUserOrders();
            }
        }

        // ===================================
        // CHECKOUT FUNCTIONS
        // ===================================

        function proceedToCheckout() {
            const cart = getCart();
            
            if (cart.length === 0) {
                showNotification('Your cart is empty!', 'error');
                return;
            }

            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            const user = JSON.parse(localStorage.getItem('user') || '{}');

            // Pre-fill form if user is logged in
            if (isLoggedIn && user) {
                document.getElementById('checkoutFirstName').value = user.firstName || '';
                document.getElementById('checkoutLastName').value = user.lastName || '';
                document.getElementById('checkoutEmail').value = user.email || '';
                document.getElementById('checkoutPhone').value = user.phoneNumber || '';
                document.getElementById('checkoutAddress').value = user.address || '';
                document.getElementById('checkoutCity').value = user.city || '';
                document.getElementById('checkoutPostalCode').value = user.postalCode || '';
                document.getElementById('checkoutCountry').value = user.country || '';
            } else {
                // Clear form for guest checkout
                document.getElementById('checkoutForm').reset();
            }

            // Display cart items in checkout summary
            displayCheckoutItems();

            // Close cart modal and open checkout modal
            closeModal('cartModal');
            openModal('checkoutModal');
        }

        function submitCheckoutForm() {
            console.log('📝 Submit button clicked');
            const form = document.getElementById('checkoutForm');
            
            // Check if form is valid
            if (form.checkValidity()) {
                console.log('✅ Form is valid, triggering submit');
                // Trigger the form submit event which will call placeOrder()
                if (form.requestSubmit) {
                    form.requestSubmit();
                } else {
                    // Fallback for older browsers
                    const event = new Event('submit', { bubbles: true, cancelable: true });
                    form.dispatchEvent(event);
                }
            } else {
                console.log('❌ Form validation failed');
                // Report validity to show which fields are invalid
                form.reportValidity();
            }
        }

        function displayCheckoutItems() {
            const cart = getCart();
            const container = document.getElementById('checkoutItems');
            
            let subtotal = 0;
            let checkoutHTML = '';

            cart.forEach(item => {
                const itemTotal = item.product.price * item.quantity;
                subtotal += itemTotal;

                checkoutHTML += `
                    <div class="checkout-item">
                        <div class="checkout-item-icon">
                            <i class="${item.product.icon || 'fas fa-box'}"></i>
                        </div>
                        <div class="checkout-item-details">
                            <div class="checkout-item-name">${item.product.name}</div>
                            <div class="checkout-item-quantity">Qty: ${item.quantity}</div>
                        </div>
                        <div class="checkout-item-price">$${itemTotal.toFixed(2)}</div>
                    </div>
                `;
            });

            // Calculate totals
            const tax = subtotal * 0.1;
            const shipping = subtotal > 100 ? 0 : 15;
            const total = subtotal + tax + shipping;

            // Update summary
            document.getElementById('checkoutSubtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('checkoutTax').textContent = `$${tax.toFixed(2)}`;
            document.getElementById('checkoutShipping').textContent = shipping === 0 ? 'FREE' : `$${shipping.toFixed(2)}`;
            document.getElementById('checkoutTotal').textContent = `$${total.toFixed(2)}`;

            container.innerHTML = checkoutHTML;
        }

        async function placeOrder(event) {
            event.preventDefault();

            console.log('🛒 Starting order placement...');

            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing Order...';
            submitBtn.disabled = true;

            try {
                const cart = getCart();
                console.log('📦 Cart items:', cart);
                
                if (cart.length === 0) {
                    showNotification('Your cart is empty!', 'error');
                    submitBtn.innerHTML = originalBtnText;
                    submitBtn.disabled = false;
                    return;
                }

                // Calculate order totals
                const subtotal = cart.reduce((sum, item) => sum + (item.product.price * item.quantity), 0);
                const tax = subtotal * 0.1;
                const shipping = subtotal > 100 ? 0 : 15;
                const total = subtotal + tax + shipping;

                console.log('💰 Order totals:', { subtotal, tax, shipping, total });

                // Get form data
                const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
                const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
                
                console.log('👤 User status:', isLoggedIn ? 'Logged in' : 'Guest');
                console.log('💳 Payment method:', paymentMethod);
                
                // Create order data matching backend DTO
                const orderData = {
                    paymentMethod: paymentMethod,
                    shippingAddress: document.getElementById('checkoutAddress').value,
                    shippingCity: document.getElementById('checkoutCity').value,
                    shippingPostalCode: document.getElementById('checkoutPostalCode').value,
                    shippingCountry: document.getElementById('checkoutCountry').value,
                    customerNotes: document.getElementById('checkoutNotes').value || null
                };

                // Add contact info to customer notes if guest (for offline mode)
                if (!isLoggedIn) {
                    const firstName = document.getElementById('checkoutFirstName').value;
                    const lastName = document.getElementById('checkoutLastName').value;
                    const email = document.getElementById('checkoutEmail').value;
                    const phone = document.getElementById('checkoutPhone').value;
                    
                    const guestInfo = `Guest: ${firstName} ${lastName}, Email: ${email}, Phone: ${phone}`;
                    orderData.customerNotes = orderData.customerNotes 
                        ? `${guestInfo}. ${orderData.customerNotes}` 
                        : guestInfo;
                }

                // Try to place order via backend
                if (isBackendConnected && isLoggedIn) {
                    console.log('🌐 Submitting order to backend...');
                    console.log('📤 Order data:', orderData);
                    
                    const response = await apiCall('/orders', {
                        method: 'POST',
                        body: JSON.stringify(orderData)
                    });

                    console.log('📥 Backend response:', response);

                    if (response.success) {
                        console.log('✅ Order placed successfully!', response.data);
                        
                        // Clear cart from backend
                        if (isBackendConnected) {
                            try {
                                await apiCall('/cart/clear', { method: 'POST' });
                                console.log('🗑️ Backend cart cleared');
                            } catch (err) {
                                console.warn('⚠️ Could not clear backend cart:', err);
                            }
                        }
                        
                        // Clear local cart
                        localStorage.removeItem('cart');
                        updateCartDisplay();
                        updateCartCount();
                        
                        // Show success message
                        showNotification('🎉 Order placed successfully! Order #' + response.data.orderNumber, 'success');
                        
                        // Close checkout modal
                        closeModal('checkoutModal');
                        
                        // Reset form
                        document.getElementById('checkoutForm').reset();
                        
                        // Show order confirmation
                        showOrderConfirmation(response.data);
                    } else {
                        console.error('❌ Order placement failed:', response.message);
                        showNotification(response.message || 'Failed to place order. Please try again.', 'error');
                    }
                } else {
                    console.log('💾 Saving order locally (offline mode or guest)...');
                    // Offline mode or guest checkout - save to localStorage
                    const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                    const orderNumber = 'ORD-' + Date.now();
                    
                    const newOrder = {
                        ...orderData,
                        orderNumber: orderNumber,
                        id: Date.now(),
                        createdAt: new Date().toISOString(),
                        status: 'Pending',
                        paymentStatus: 'Pending',
                        subTotal: subtotal,
                        tax: tax,
                        shippingCost: shipping,
                        totalAmount: total,
                        items: cart.map(item => ({
                            productId: item.productId,
                            productName: item.product.name,
                            quantity: item.quantity,
                            price: item.product.price,
                            subTotal: item.product.price * item.quantity
                        }))
                    };
                    
                    orders.push(newOrder);
                    localStorage.setItem('orders', JSON.stringify(orders));
                    
                    console.log('✅ Order saved locally:', newOrder);
                    console.log('📋 Total orders in localStorage:', orders.length);
                    
                    // Clear cart
                    localStorage.removeItem('cart');
                    updateCartDisplay();
                    updateCartCount();
                    
                    // Show success message
                    showNotification('🎉 Order placed successfully! Order #' + orderNumber, 'success');
                    
                    // Close checkout modal
                    closeModal('checkoutModal');
                    
                    // Reset form
                    document.getElementById('checkoutForm').reset();
                    
                    // Show order confirmation
                    showOrderConfirmation(newOrder);
                    
                    if (!isLoggedIn) {
                        setTimeout(() => {
                            showNotification('💡 Create an account to track your order online!', 'info');
                        }, 3000);
                    }
                }

            } catch (error) {
                console.error('❌ Order placement error:', error);
                console.error('Error details:', {
                    message: error.message,
                    stack: error.stack
                });
                showNotification('⚠️ Failed to place order. Please try again or contact support.', 'error');
            } finally {
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
                console.log('🔄 Order placement process completed');
            }
        }

        function showOrderConfirmation(order) {
            // Show detailed order confirmation
            console.log('Order confirmed:', order);
            
            // Create a beautiful confirmation notification
            const confirmationHTML = `
                <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                           background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                           z-index: 10001; text-align: center; max-width: 500px;">
                    <div style="font-size: 60px; color: #27ae60; margin-bottom: 20px;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2 style="color: #2c3e50; margin-bottom: 15px;">Order Placed Successfully!</h2>
                    <p style="font-size: 18px; color: #7f8c8d; margin-bottom: 10px;">
                        Order Number: <strong style="color: #e74c3c;">#${order.orderNumber || order.id}</strong>
                    </p>
                    <p style="font-size: 16px; color: #7f8c8d; margin-bottom: 25px;">
                        Total Amount: <strong>$${order.totalAmount?.toFixed(2) || '0.00'}</strong>
                    </p>
                    <p style="color: #95a5a6; font-size: 14px; margin-bottom: 20px;">
                        You can track your order in the Orders section of your account.
                    </p>
                    <button onclick="this.parentElement.remove()" class="btn" style="padding: 12px 30px;">
                        Continue Shopping
                    </button>
                </div>
                <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                           background: rgba(0,0,0,0.5); z-index: 10000;" 
                           onclick="this.nextElementSibling.remove(); this.remove();"></div>
            `;
            
            const confirmationDiv = document.createElement('div');
            confirmationDiv.innerHTML = confirmationHTML;
            document.body.appendChild(confirmationDiv);
            
            // Auto-remove after 10 seconds
            setTimeout(() => {
                if (confirmationDiv.parentElement) {
                    confirmationDiv.remove();
                }
            }, 10000);
        }

        // ===================================
        // ACCOUNT FUNCTIONS
        // ===================================

        async function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            // Show loading state
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging in...';
            submitBtn.disabled = true;

            try {
                // Call API
                const response = await apiCall('/auth/login', {
                    method: 'POST',
                    body: JSON.stringify({ email, password })
                });

                if (response.success) {
                    // Store token and user data
                    localStorage.setItem('token', response.data.token);
                    localStorage.setItem('user', JSON.stringify(response.data.user));
                    localStorage.setItem('isLoggedIn', 'true');

                    showNotification('Login successful!', 'success');
                    updateUIForLoggedInUser();
                    
                    // Load cart from backend
                    await syncCartWithBackend();
                    
                    // Switch to profile tab
                    switchAccountTab('profile');
                    
                    // Reset form
                    event.target.reset();
                } else {
                    showNotification(response.message || 'Login failed. Please check your credentials.', 'error');
                }
            } catch (error) {
                console.error('Login error:', error);
                showNotification('Login failed. Please try again.', 'error');
            } finally {
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            const firstName = document.getElementById('registerName').value.split(' ')[0];
            const lastName = document.getElementById('registerName').value.split(' ').slice(1).join(' ') || firstName;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            if (password !== confirmPassword) {
                showNotification('Passwords do not match!', 'error');
                return;
            }

            // Validate password strength
            if (password.length < 6) {
                showNotification('Password must be at least 6 characters long', 'error');
                return;
            }

            // Show loading state
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Registering...';
            submitBtn.disabled = true;

            try {
                // Call API
                const response = await apiCall('/auth/register', {
                    method: 'POST',
                    body: JSON.stringify({
                        firstName: firstName,
                        lastName: lastName,
                        email: email,
                        password: password,
                        phoneNumber: null // Send null instead of empty string for optional field
                    })
                });

                console.log('Registration response:', response); // Debug log

                if (response.success) {
                    // Store token and user data
                    localStorage.setItem('token', response.data.token);
                    localStorage.setItem('user', JSON.stringify(response.data.user));
                    localStorage.setItem('isLoggedIn', 'true');

                    showNotification('Registration successful! Welcome!', 'success');
                    updateUIForLoggedInUser();
                    
                    // Sync cart with backend
                    await syncCartWithBackend();
                    
                    // Switch to profile tab
                    switchAccountTab('profile');
                    
                    // Reset form
                    event.target.reset();
                } else {
                    const errorMsg = response.message || 'Registration failed. Please try again.';
                    console.error('Registration failed:', errorMsg);
                    showNotification(errorMsg, 'error');
                }
            } catch (error) {
                console.error('Registration error:', error);
                const errorMsg = error.message || 'Cannot connect to server. Please ensure backend is running.';
                showNotification(errorMsg, 'error');
            } finally {
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
            }
        }

        function handleLogout() {
            // Clear all user-related data
            localStorage.removeItem('user');
            localStorage.removeItem('token');
            localStorage.removeItem('isLoggedIn');
            
            // Update UI to show login/register tabs
            updateUIForLoggedInUser();
            
            // Reset cart and wishlist display (keep data for anonymous users)
            updateCartDisplay();
            updateWishlistDisplay();
            
            showNotification('Logged out successfully', 'success');
            
            // Close modal
            closeModal('accountModal');
        }

        function updateUIForLoggedInUser() {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            // Get all tab buttons
            const loginTabBtn = document.querySelector('.account-tab[onclick*="login"]');
            const registerTabBtn = document.querySelector('.account-tab[onclick*="register"]');
            const profileTab = document.getElementById('profileTab');
            const ordersTab = document.getElementById('ordersTab');

            if (isLoggedIn) {
                // Hide login and register tabs
                if (loginTabBtn) loginTabBtn.style.display = 'none';
                if (registerTabBtn) registerTabBtn.style.display = 'none';
                
                // Show profile and orders tabs
                profileTab.style.display = 'block';
                ordersTab.style.display = 'block';
                
                // Load profile data
                loadUserProfile();
            } else {
                // Show login and register tabs
                if (loginTabBtn) loginTabBtn.style.display = 'block';
                if (registerTabBtn) registerTabBtn.style.display = 'block';
                
                // Hide profile and orders tabs
                profileTab.style.display = 'none';
                ordersTab.style.display = 'none';
            }
        }

        // Toggle between view and edit mode for profile
        function toggleEditMode() {
            const viewMode = document.getElementById('profileViewMode');
            const editMode = document.getElementById('profileEditMode');
            
            if (viewMode.style.display === 'none') {
                // Switch to view mode
                viewMode.style.display = 'block';
                editMode.style.display = 'none';
            } else {
                // Switch to edit mode
                viewMode.style.display = 'none';
                editMode.style.display = 'block';
                
                // Pre-fill form with current data
                const user = JSON.parse(localStorage.getItem('user') || '{}');
                document.getElementById('editFirstName').value = user.firstName || '';
                document.getElementById('editLastName').value = user.lastName || '';
                document.getElementById('editPhone').value = user.phoneNumber || '';
                document.getElementById('editAddress').value = user.address || '';
                document.getElementById('editCity').value = user.city || '';
                document.getElementById('editPostalCode').value = user.postalCode || '';
                document.getElementById('editCountry').value = user.country || '';
            }
        }

        // Handle profile update
        async function handleProfileUpdate(event) {
            event.preventDefault();
            
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
            submitBtn.disabled = true;

            try {
                const updateData = {
                    firstName: document.getElementById('editFirstName').value,
                    lastName: document.getElementById('editLastName').value,
                    phoneNumber: document.getElementById('editPhone').value || null,
                    address: document.getElementById('editAddress').value || null,
                    city: document.getElementById('editCity').value || null,
                    postalCode: document.getElementById('editPostalCode').value || null,
                    country: document.getElementById('editCountry').value || null
                };

                const response = await apiCall('/auth/profile', {
                    method: 'PUT',
                    body: JSON.stringify(updateData)
                });

                if (response.success) {
                    // Update local storage
                    const user = JSON.parse(localStorage.getItem('user') || '{}');
                    Object.assign(user, response.data);
                    localStorage.setItem('user', JSON.stringify(user));
                    
                    // Reload profile display
                    await loadUserProfile();
                    
                    // Switch back to view mode
                    toggleEditMode();
                    
                    showNotification('Profile updated successfully!', 'success');
                } else {
                    showNotification(response.message || 'Failed to update profile', 'error');
                }
            } catch (error) {
                console.error('Profile update error:', error);
                showNotification('Failed to update profile. Please try again.', 'error');
            } finally {
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
            }
        }

        async function loadUserProfile() {
            // Ensure view mode is shown (not edit mode)
            const viewMode = document.getElementById('profileViewMode');
            const editMode = document.getElementById('profileEditMode');
            if (viewMode && editMode) {
                viewMode.style.display = 'block';
                editMode.style.display = 'none';
            }
            
            const token = localStorage.getItem('token');
            
            if (!token) {
                document.getElementById('profileName').textContent = '-';
                document.getElementById('profileEmail').textContent = '-';
                document.getElementById('profilePhone').textContent = '-';
                document.getElementById('profileAddress').textContent = '-';
                document.getElementById('profileCity').textContent = '-';
                document.getElementById('profileMemberSince').textContent = '-';
                return;
            }

            try {
                // Fetch profile from API
                const response = await apiCall('/auth/profile');
                
                if (response.success && response.data) {
                    const user = response.data;
                    
                    // Update localStorage with latest data
                    localStorage.setItem('user', JSON.stringify(user));
                    
                    // Display profile info
                    const fullName = `${user.firstName} ${user.lastName}`;
                    document.getElementById('profileName').textContent = fullName;
                    document.getElementById('profileEmail').textContent = user.email || '-';
                    document.getElementById('profilePhone').textContent = user.phoneNumber || '-';
                    document.getElementById('profileAddress').textContent = user.address || '-';
                    document.getElementById('profileCity').textContent = user.city || '-';
                    
                    // Format member since date
                    const memberSince = user.createdAt ? new Date(user.createdAt).toLocaleDateString() : '-';
                    document.getElementById('profileMemberSince').textContent = memberSince;
                } else {
                    // If token is invalid, logout
                    if (response.message && response.message.includes('Unauthorized')) {
                        handleLogout();
                        showNotification('Session expired. Please login again.', 'error');
                    }
                }
            } catch (error) {
                console.error('Load profile error:', error);
                // Try to use cached user data
                const user = JSON.parse(localStorage.getItem('user') || '{}');
                if (user.firstName) {
                    const fullName = `${user.firstName} ${user.lastName}`;
                    document.getElementById('profileName').textContent = fullName;
                    document.getElementById('profileEmail').textContent = user.email || '-';
                }
            }
        }

        async function loadUserOrders() {
            const token = localStorage.getItem('token');
            const ordersList = document.getElementById('ordersList');
            
            if (!token) {
                ordersList.innerHTML = '<p style="text-align: center; padding: 40px; color: var(--light-text);">Please login to view your orders</p>';
                return;
            }

            // Show loading state
            ordersList.innerHTML = '<div style="text-align: center; padding: 40px;"><i class="fas fa-spinner fa-spin" style="font-size: 40px; color: var(--secondary-color);"></i><p>Loading orders...</p></div>';

            try {
                // Fetch orders from API
                const response = await apiCall('/orders');
                
                if (response.success && response.data && response.data.length > 0) {
                    ordersList.innerHTML = response.data.map(order => {
                        // Format date
                        const orderDate = new Date(order.orderDate).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'short',
                            day: 'numeric'
                        });
                        
                        // Determine status class and label
                        const statusMap = {
                            'Pending': { class: 'pending', label: 'Pending' },
                            'Processing': { class: 'pending', label: 'Processing' },
                            'Shipped': { class: 'completed', label: 'Shipped' },
                            'Delivered': { class: 'completed', label: 'Delivered' },
                            'Cancelled': { class: 'cancelled', label: 'Cancelled' }
                        };
                        
                        const status = statusMap[order.status] || { class: 'pending', label: order.status };
                        
                        return `
                            <div class="order-item">
                                <div class="order-header">
                                    <span class="order-id">Order #${order.id}</span>
                                    <span class="order-status ${status.class}">${status.label}</span>
                                </div>
                                <div class="profile-detail">
                                    <strong>Date:</strong>
                                    <span>${orderDate}</span>
                                </div>
                                <div class="profile-detail">
                                    <strong>Total:</strong>
                                    <span>$${order.totalAmount.toFixed(2)}</span>
                                </div>
                                <div class="profile-detail">
                                    <strong>Items:</strong>
                                    <span>${order.orderItems ? order.orderItems.length : 0} product${order.orderItems && order.orderItems.length !== 1 ? 's' : ''}</span>
                                </div>
                            </div>
                        `;
                    }).join('');
                } else {
                    // No orders found
                    ordersList.innerHTML = `
                        <div style="text-align: center; padding: 60px 20px;">
                            <i class="fas fa-shopping-bag" style="font-size: 60px; color: var(--light-text); margin-bottom: 20px;"></i>
                            <h3 style="font-size: 20px; margin-bottom: 10px; color: var(--primary-color);">No orders yet</h3>
                            <p style="color: var(--light-text); margin-bottom: 20px;">Start shopping and your orders will appear here</p>
                            <button class="btn" onclick="closeModal('accountModal')">Browse Products</button>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Load orders error:', error);
                ordersList.innerHTML = '<p style="text-align: center; padding: 40px; color: var(--secondary-color);">Failed to load orders. Please try again.</p>';
            }
        }

        // ===================================
        // CART FUNCTIONS
        // ===================================

        function getCart() {
            return JSON.parse(localStorage.getItem('cart') || '[]');
        }

        function saveCart(cart) {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Sync cart with backend after login
        async function syncCartWithBackend() {
            const token = localStorage.getItem('token');
            if (!token) return;

            try {
                // Get backend cart
                const response = await apiCall('/cart');
                
                if (response.success && response.data) {
                    // Convert backend cart format to local format
                    const backendCart = response.data.map(item => ({
                        productId: item.productId,
                        product: {
                            name: item.productName,
                            price: item.price,
                            category: item.categoryName || 'Product',
                            icon: 'fas fa-box' // Default icon
                        },
                        quantity: item.quantity
                    }));
                    
                    // Merge with local cart if any
                    const localCart = getCart();
                    
                    if (localCart.length > 0) {
                        // Upload local cart to backend
                        for (const item of localCart) {
                            await apiCall('/cart', {
                                method: 'POST',
                                body: JSON.stringify({
                                    productId: item.productId,
                                    quantity: item.quantity
                                })
                            });
                        }
                        
                        // Clear local cart
                        localStorage.removeItem('cart');
                        
                        // Reload backend cart
                        const updatedResponse = await apiCall('/cart');
                        if (updatedResponse.success && updatedResponse.data) {
                            updateCartCount();
                        }
                    } else {
                        // Just use backend cart
                        updateCartCount();
                    }
                }
            } catch (error) {
                console.error('Cart sync error:', error);
            }
        }

        function addToCartLocal(productId, quantity = 1) {
            const cart = getCart();
            const existingItem = cart.find(item => item.productId === productId);

            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                const product = sampleProducts[productId];
                cart.push({
                    productId: productId,
                    product: product,
                    quantity: quantity
                });
            }

            saveCart(cart);
            updateCartCount();
            updateCartDisplay();
            showNotification('Product added to cart!', 'success');
        }

        function updateCartQuantity(productId, change) {
            const cart = getCart();
            const item = cart.find(item => item.productId === productId);

            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCartLocal(productId);
                    return;
                }
                saveCart(cart);
                updateCartDisplay();
            }
        }

        function removeFromCartLocal(productId) {
            let cart = getCart();
            cart = cart.filter(item => item.productId !== productId);
            saveCart(cart);
            updateCartCount();
            updateCartDisplay();
            showNotification('Item removed from cart', 'success');
        }

        function updateCartDisplay() {
            const cart = getCart();
            const container = document.getElementById('cartItemsContainer');
            const emptyState = document.getElementById('cartEmpty');

            if (cart.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';

            let subtotal = 0;
            let cartHTML = '<div class="cart-items">';

            cart.forEach(item => {
                const itemTotal = item.product.price * item.quantity;
                subtotal += itemTotal;

                cartHTML += `
                    <div class="cart-item">
                        <div class="cart-item-image">
                            <i class="${item.product.icon}"></i>
                        </div>
                        <div class="cart-item-details">
                            <h4>${item.product.name}</h4>
                            <div class="cart-item-category">${item.product.category}</div>
                            <div class="cart-item-price">$${item.product.price}</div>
                        </div>
                        <div class="cart-item-actions">
                            <div class="cart-item-quantity">
                                <button onclick="updateCartQuantity(${item.productId}, -1)">-</button>
                                <span>${item.quantity}</span>
                                <button onclick="updateCartQuantity(${item.productId}, 1)">+</button>
                            </div>
                            <button class="cart-item-remove" onclick="removeFromCartLocal(${item.productId})">
                                <i class="fas fa-trash"></i> Remove
                            </button>
                        </div>
                    </div>
                `;
            });

            cartHTML += '</div>';

            const tax = subtotal * 0.1;
            const shipping = subtotal > 200 ? 0 : 20;
            const total = subtotal + tax + shipping;

            cartHTML += `
                <div class="cart-summary">
                    <div class="cart-summary-row">
                        <span>Subtotal:</span>
                        <span>$${subtotal.toFixed(2)}</span>
                    </div>
                    <div class="cart-summary-row">
                        <span>Tax (10%):</span>
                        <span>$${tax.toFixed(2)}</span>
                    </div>
                    <div class="cart-summary-row">
                        <span>Shipping:</span>
                        <span>${shipping === 0 ? 'FREE' : '$' + shipping.toFixed(2)}</span>
                    </div>
                    <div class="cart-summary-row total">
                        <span>Total:</span>
                        <span>$${total.toFixed(2)}</span>
                    </div>
                </div>
                <div class="cart-actions">
                    <button class="btn btn-secondary" onclick="closeModal('cartModal')">Continue Shopping</button>
                    <button class="btn" onclick="proceedToCheckout()">Proceed to Checkout</button>
                </div>
            `;

            container.innerHTML = cartHTML;
        }

        function updateCartCount() {
            const cart = getCart();
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount = totalItems;
            cartCountElement.textContent = totalItems;
        }

        // ===================================
        // WISHLIST FUNCTIONS
        // ===================================

        function getWishlist() {
            return JSON.parse(localStorage.getItem('wishlist') || '[]');
        }

        function saveWishlist(wishlist) {
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
        }

        function addToWishlistLocal(productId) {
            const wishlist = getWishlist();
            
            if (wishlist.includes(productId)) {
                showNotification('Item already in wishlist!', 'info');
                return;
            }

            wishlist.push(productId);
            saveWishlist(wishlist);
            updateWishlistCount();
            updateWishlistDisplay();
            showNotification('Added to wishlist!', 'success');
        }

        function removeFromWishlistLocal(productId) {
            let wishlist = getWishlist();
            wishlist = wishlist.filter(id => id !== productId);
            saveWishlist(wishlist);
            updateWishlistCount();
            updateWishlistDisplay();
            showNotification('Removed from wishlist', 'success');
        }

        function updateWishlistCount() {
            const wishlist = getWishlist();
            const wishlistCountElement = document.querySelector('.wishlist-count');
            if (wishlistCountElement) {
                wishlistCountElement.textContent = wishlist.length;
                if (wishlist.length > 0) {
                    wishlistCountElement.style.animation = 'none';
                    setTimeout(() => {
                        wishlistCountElement.style.animation = 'pulse 0.5s';
                    }, 10);
                }
            }
        }

        function updateWishlistDisplay() {
            const wishlist = getWishlist();
            const grid = document.getElementById('wishlistGrid');
            const emptyState = document.getElementById('wishlistEmpty');

            if (wishlist.length === 0) {
                grid.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';

            let wishlistHTML = '';

            wishlist.forEach(productId => {
                const product = sampleProducts[productId];
                if (!product) return;

                wishlistHTML += `
                    <div class="wishlist-item">
                        <button class="wishlist-item-remove" onclick="removeFromWishlistLocal(${productId})">
                            <i class="fas fa-times"></i>
                        </button>
                        <div class="wishlist-item-image">
                            <i class="${product.icon}"></i>
                        </div>
                        <div class="wishlist-item-info">
                            <h4>${product.name}</h4>
                            <div class="wishlist-item-price">$${product.price}</div>
                            <div class="wishlist-item-actions">
                                <button class="btn" onclick="addToCartLocal(${productId}, 1)">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                                <button class="btn btn-secondary" onclick="quickViewFromWishlist(${productId})">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });

            grid.innerHTML = wishlistHTML;
        }

        function quickViewFromWishlist(productId) {
            closeModal('wishlistModal');
            setTimeout(() => {
                quickView(productId);
            }, 300);
        }

        // ===================================
        // NAVIGATION HANDLERS
        // ===================================

        // Update navigation to open modals
        document.querySelector('a[href="#search"]').addEventListener('click', function(e) {
            e.preventDefault();
            openSearchModal();
        });

        document.querySelector('a[href="#account"]').addEventListener('click', function(e) {
            e.preventDefault();
            updateUIForLoggedInUser();
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            // Open modal
            openModal('accountModal');
            
            // Show appropriate tab
            if (isLoggedIn) {
                switchAccountTab('profile');
            } else {
                switchAccountTab('login');
            }
        });

        document.querySelector('a[href="#cart"]').addEventListener('click', function(e) {
            e.preventDefault();
            updateCartDisplay();
            openModal('cartModal');
        });

        document.querySelector('a[href="#wishlist"]').addEventListener('click', function(e) {
            e.preventDefault();
            updateWishlistDisplay();
            openModal('wishlistModal');
        });

        // Override existing addToCart function
        function addToCart(productId) {
            addToCartLocal(productId, 1);
        }

        function addToWishlist(productId) {
            addToWishlistLocal(productId);
        }

        // Helper function for star rating (if not already defined)
        function getStarRating(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            let stars = '';

            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }

            return stars;
        }

        // Initialize cart count and wishlist count on page load
        window.addEventListener('load', async function() {
            // Check backend connection
            await checkBackendConnection();
            
            // Initialize UI
            updateCartCount();
            updateWishlistCount();
            updateUIForLoggedInUser();
            
            // If user is logged in and backend is connected, sync data
            const token = localStorage.getItem('token');
            if (token && isBackendConnected) {
                await syncCartWithBackend();
            }
        });
    </script>
</body>
</html>
